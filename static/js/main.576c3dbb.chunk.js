(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(t,e,n){t.exports=n(60)},33:function(t,e,n){},35:function(t,e,n){},60:function(t,e,n){"use strict";n.r(e);var r=n(0),s=n.n(r),i=n(25),a=n.n(i),o=(n(33),n(1)),c=n(2),u=n(4),l=n(3),p=n(5),h=(n(35),n(6)),d=n(12),b=n(13),O=n.n(b),f=function t(){var e=this;Object(o.a)(this,t),this.initToken=function(){return O.a.get(e.tokenURL+"?command=request").then(function(t){e.setToken(t.data.token)})},this.getToken=function(){return localStorage.getItem("quizToken")},this.setToken=function(t){localStorage.setItem("quizToken",t)},this.resetToken=function(){var t=e.getToken();return O.a.get(e.tokenURL+"?command=reset&token="+t).then(function(t){e.setToken(t.data.token)})},this.parseResponse=function(t){4===t.data.response_code&&e.resetToken()},this.fetchQuestions=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;if(t<1||t>50)throw new Error("Invalid number of questions to fetch [1 - 50]");var n,r=e.getToken();return n=null===r?null:"&token="+r,O.a.get(e.apiURL+"&amount=".concat(t).concat(n)).then(function(t){var e=[];return console.log(t),t.data.results.forEach(function(t,n){var r=t.incorrect_answers;r.push(t.correct_answer),function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=[t[n],t[e]];t[e]=r[0],t[n]=r[1]}}(r),e[n]={question:t.question,correctAnswer:t.correct_answer,answers:r}}),e})},this.baseURL="https://opentdb.com/",this.apiURL=this.baseURL+"api.php?type=multiple",this.tokenURL=this.baseURL+"api_token.php"},E=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this;return s.a.createElement("button",{className:this.props.answerStyle,dangerouslySetInnerHTML:{__html:this.props.answer},onClick:function(e){return t.props.click(t.props.answer,t.props.answerId,e)}})}}]),e}(r.Component),k=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this;return s.a.createElement("div",null,s.a.createElement("p",null,s.a.createElement("strong",null,"Question ",this.props.questionNumber)),s.a.createElement("div",{className:"question-box"},s.a.createElement("p",{dangerouslySetInnerHTML:{__html:this.props.question}})),s.a.createElement("div",{className:"answer-box"},this.props.answers.map(function(e,n){return s.a.createElement(E,{answer:e,answerId:n,answerStyle:t.props.answerStyles[n],click:t.props.click})})))}}]),e}(r.Component),m=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return s.a.createElement("p",null,s.a.createElement("strong",null,"Score: "),this.props.currentScore,"/10")}}]),e}(r.Component),j=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return s.a.createElement("button",{className:"start-button",onClick:this.props.click},"Start!")}}]),e}(r.Component),w=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return s.a.createElement("button",{className:"next-button",onClick:this.props.click},"Next")}}]),e}(r.Component),g=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,t))).getCurrentQuestion=n.getCurrentQuestion.bind(Object(h.a)(Object(h.a)(n))),n.getCurrentAnswer=n.getCurrentAnswer.bind(Object(h.a)(Object(h.a)(n))),n.startButtonClickHandler=n.startButtonClickHandler.bind(Object(h.a)(Object(h.a)(n))),n.nextButtonClickHandler=n.nextButtonClickHandler.bind(Object(h.a)(Object(h.a)(n))),n.answerClickHandler=n.answerClickHandler.bind(Object(h.a)(Object(h.a)(n))),n}return Object(p.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){}},{key:"startButtonClickHandler",value:function(t){this.props.dispatch({type:"START_QUIZ"}),this.props.dispatch(function(t){t({type:"REQUEST_QUESTIONS"});var e=new f;return e.initToken().then(function(){return e.fetchQuestions()}).then(function(e){return t({type:"RECEIVE_QUESTIONS",payload:e})})})}},{key:"nextButtonClickHandler",value:function(t){this.props.dispatch({type:"END_VALIDATION"}),this.props.currentQuestion<9?this.props.dispatch({type:"FETCH_QUESTION"}):this.props.dispatch({type:"END_QUIZ"})}},{key:"answerClickHandler",value:function(t,e,n){this.props.isValidating||(this.props.dispatch({type:"START_VALIDATION"}),this.props.dispatch(function(t){return{type:"MAKE_SELECTION",payload:t}}(e)),t===this.getCurrentQuestion().correctAnswer&&this.props.dispatch({type:"INCREMENT_SCORE"}),this.props.currentQuestion>9&&this.props.dispatch({type:"END_QUIZ"}))}},{key:"getAnswerButtonStyles",value:function(){var t=this,e=[0,0,0,0];return e.fill("answer-button",0,4),this.props.isValidating&&(e.fill("answer-button-done",0,4),this.getCurrentQuestion().answers.forEach(function(n,r){r===t.props.currentSelection&&(e[r]="answer-button-done answer-button-incorrect"),n===t.getCurrentAnswer()&&(e[r]="answer-button-done answer-button-correct")})),e}},{key:"getCurrentQuestion",value:function(){return this.props.questions[this.props.currentQuestion]}},{key:"getCurrentAnswer",value:function(){return this.getCurrentQuestion().correctAnswer}},{key:"getCurrentSelectedAnswer",value:function(){return this.getCurrentQuestion().answers[this.props.currentSelection]}},{key:"render",value:function(){var t,e=s.a.createElement(j,{click:this.startButtonClickHandler});if(!this.props.isStarted)return e;if(this.props.isFinished)return s.a.createElement("div",null,s.a.createElement("p",null,"You scored ",this.props.score,"/10 !"),e);if(this.props.isFetching)return s.a.createElement("p",null,"Loading...");this.props.isValidating&&(t=s.a.createElement(w,{click:this.nextButtonClickHandler}));var n=this.getCurrentQuestion();return s.a.createElement("div",null,s.a.createElement(k,{question:n.question,questionNumber:this.props.currentQuestion+1,answers:n.answers,answerStyles:this.getAnswerButtonStyles(),click:this.answerClickHandler}),s.a.createElement(m,{currentScore:this.props.score}),t)}}]),e}(r.Component),v=Object(d.b)(function(t){return{isStarted:t.isStarted,isFinished:t.isFinished,isValidating:t.isValidating,questions:t.questions,currentQuestion:t.currentQuestion,currentSelection:t.currentSelection,isFetching:t.isFetching,score:t.score}})(g),y=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(v,null))}}]),e}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var S=n(11),C=n(27),T=n(8),Q={isStarted:!1,isFinished:!1,isFetching:!1,isValidating:!1,questions:[],currentQuestion:0,currentSelection:null,score:0},I=Object(S.c)(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"START_QUIZ":return Object(T.a)({},Q,{isStarted:!0});case"END_QUIZ":return Object(T.a)({},t,{isFinished:!0});case"REQUEST_QUESTIONS":return Object(T.a)({},t,{isFetching:!0});case"RECEIVE_QUESTIONS":return Object(T.a)({},t,{isFetching:!1,questions:e.payload,currentQuestion:0,score:0});case"FETCH_QUESTION":return Object(T.a)({},t,{currentQuestion:t.currentQuestion+1,currentSelection:null});case"MAKE_SELECTION":return Object(T.a)({},t,{currentSelection:e.payload});case"START_VALIDATION":return Object(T.a)({},t,{isValidating:!0});case"END_VALIDATION":return Object(T.a)({},t,{isValidating:!1});case"INCREMENT_SCORE":return Object(T.a)({},t,{score:t.score+1});default:return Object(T.a)({},t)}},Object(S.a)(C.a)),N=s.a.createElement(d.a,{store:I},s.a.createElement(y,null));a.a.render(N,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[28,2,1]]]);
//# sourceMappingURL=main.576c3dbb.chunk.js.map